<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Document Object Model</title>

    <script>
        window.addEventListener("load", inicio);

        function inicio() {
            document.getElementById("crearParrafo").addEventListener("click", crearParrafo);
            document.getElementById("crearImagen").addEventListener("click", crearImagen);
            document.getElementById("borrarUltimo").addEventListener("click", borrarUltimo);
            document.getElementById("borrarPrimero").addEventListener("click", borrarPrimero);
            document.getElementById("sustituirPrimVacio").addEventListener("click", sustituirPrimero);
            document.getElementById("añadirQuitarPunto").addEventListener("click", puntos);
        }

        function crearParrafo() {
            var parrafo = document.createElement("p"); //SE CREA EL ELEMENTO P
            var texto = document.createTextNode(document.getElementById("texto").value); //SE CREA UN TEXTO CON EL VALOR DEL VALOR DEL TEXTAREA

            parrafo.appendChild(texto); //SE LE AÑADE EL TEXTO AL PARRAFO

            parrafo.setAttribute("class", "miClase"); //SE LE ASIGNA A PARRAFO UNA CLASE QUE SE LLAMA MICLASE

            document.getElementById("div1").appendChild(parrafo); //SE LE AÑADE UN ELEMENTO HIJO A OTRO ELEMENTO
        }

        function crearImagen() {
            var imagen = document.createElement("img");

            var ruta = prompt("Introduce la ruta para añadir una imagen");
            imagen.setAttribute("alt", prompt("Introduce texto alternativo"));
            imagen.src = ruta;

            var cont = document.getElementById("div1");

            cont.appendChild(imagen);
        }

        function borrarUltimo() {
            var cont = document.getElementById("div1");
            var ultimo = cont.lastChild;
            cont.removeChild(ultimo);
        }

        function borrarPrimero() {
            var cont = document.getElementById("div1");
            var primero = cont.firstChild;
            cont.removeChild(primero);
        }

        function sustituirPrimero() {
            var cont = document.getElementById("div1");
            var primer = cont.firstChild;
            primer.textContent = "Parrafo Reemplazado";
        }

        function puntos() {
            var cont = document.getElementById("div1");
            var primerHijo = cont.firstChild;

            while (primerHijo != null) {
                var contenido = primerHijo.textContent;
                var ultimoCaracter = contenido.charAt(contenido.length - 1);

                if (ultimoCaracter === ".") {
                    // Eliminar el último punto si existe
                    primerHijo.textContent = contenido.slice(0, -1);
                } else {
                    // Agregar un punto al final si no existe
                    primerHijo.textContent += ".";
                }

                // Avanzar al siguiente hermano
                primerHijo = primerHijo.nextElementSibling;
            }
        }

    </script>
</head>

<body>
    <div id="div1"></div>
    <br />
    <textarea id="texto"></textarea>
    <br />
    <button id="crearParrafo">Crear parrafo</button>
    <button id="crearImagen">Crear imagen</button>
    <button id="borrarUltimo">Borrar ultimo</button>
    <button id="borrarPrimero">Borrar primero</button>
    <button id="sustituirPrimVacio">Sustituir primer párrafo por nuevo texto</button>
    <button id="añadirQuitarPunto">Añadir/Borrar punto</button>

</body>

</html>